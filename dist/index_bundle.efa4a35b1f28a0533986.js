(()=>{"use strict";var t={705:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,a){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(o[s]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},738:t=>{t.exports=function(t){return t[1]}},28:(t,e,n)=>{n.d(e,{Z:()=>c});var r=n(738),i=n.n(r),a=n(705),o=n.n(a)()(i());o.push([t.id,"html,\r\nbody {\r\n    height: 90%;\r\n}\r\n\r\n.root {\r\n    display       : flex;\r\n    flex-direction: column;\r\n    width         : 100%;\r\n}\r\n\r\n.header-div {\r\n    text-align: center;\r\n}\r\n\r\nh1 {\r\n    text-align: center;\r\n    font-style: italic;\r\n    padding   : 0;\r\n    margin    : 0;\r\n}\r\n\r\n.body-div {\r\n    display        : flex;\r\n    flex-direction : row;\r\n    justify-content: flex-start;\r\n}\r\n\r\n.buttot-div {\r\n    display       : flex;\r\n    flex-direction: column;\r\n    width         : 150px;\r\n    padding       : 7px;\r\n    margin-right  : 25px;\r\n    border        : 1px solid gray;\r\n    min-height    : 120px;\r\n\r\n}\r\n\r\n.traffic-div {\r\n    width         : 70px;\r\n    height        : auto;\r\n    display       : flex;\r\n    flex-direction: column;\r\n    align-items   : center;\r\n    box-sizing    : border-box;\r\n    padding       : 10px 0;\r\n    margin-right  : 20px;\r\n}\r\n\r\n.all_light {\r\n    display         : flex;\r\n    flex-direction  : column;\r\n    align-items     : center;\r\n    justify-content : center;\r\n    width           : 60%;\r\n    height          : 40px;\r\n    opacity         : 1;\r\n    cursor          : pointer;\r\n    background-color: black;\r\n}\r\n\r\n.lampa-light {\r\n    width        : 2rem;\r\n    height       : 2rem;\r\n    border       : 2px solid black;\r\n    border-radius: 50%;\r\n    opacity      : 0.1;\r\n}\r\n\r\n.property-div {\r\n    width          : 170px;\r\n    display        : flex;\r\n    flex-direction : column;\r\n    align-items    : center;\r\n    justify-content: flex-start;\r\n}\r\n\r\n.property-div h5 {\r\n    margin : 0;\r\n    padding: 0;\r\n}",""]);const c=o},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var a={},o=[],c=0;c<t.length;c++){var s=t[c],l=r.base?s[0]+r.base:s[0],u=a[l]||0,p="".concat(l," ").concat(u);a[l]=u+1;var d=n(p),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==d)e[d].references++,e[d].updater(m);else{var h=i(m,r);r.byIndex=c,e.splice(c,0,{identifier:p,updater:h,references:1})}o.push(p)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var a=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<a.length;o++){var c=n(a[o]);e[c].references--}for(var s=r(t,i),l=0;l<a.length;l++){var u=n(a[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}a=s}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(379),e=n.n(t),r=n(795),i=n.n(r),a=n(569),o=n.n(a),c=n(565),s=n.n(c),l=n(216),u=n.n(l),p=n(589),d=n.n(p),m=n(28),h={};h.styleTagTransform=d(),h.setAttributes=s(),h.insert=o().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=u(),e()(m.Z,h),m.Z&&m.Z.locals&&m.Z.locals;var f=function(){function t(){this.el=document.createElement("div"),this.el.className="header-div",this.el.innerHTML="<h1>Тест №3</h1>"}return Object.defineProperty(t.prototype,"getElement",{get:function(){return this.el},enumerable:!1,configurable:!0}),t.inputElement=function(){return(new t).getElement},t}(),v=function(){function t(t,e){this.el=document.createElement("button"),this.el.addEventListener("click",e),this.el.className="button",this.el.textContent=t}return Object.defineProperty(t.prototype,"getElement",{get:function(){return this.el},enumerable:!1,configurable:!0}),t.inputElement=function(e,n){return new t(e,n).getElement},t}(),g=function(){function t(){}return t.prototype.saveCurrentLamps=function(t){localStorage.setItem("curLampa",JSON.stringify(t)),console.log("".concat(t.idLampa," step ").concat(t.timeInterval/1e3," \t\t").concat((new Date).toLocaleTimeString()))},t.prototype.saveLampsTraffic=function(t){localStorage.setItem("listLamps",JSON.stringify(t))},t.prototype.loadLampsTraffic=function(){return JSON.parse(localStorage.getItem("listLamps"))},t.prototype.getItemCurLampa=function(){return JSON.parse(localStorage.getItem("curLampa"))},t}(),y=function(){function t(){this.lamps=[],this.isTheadRun=!1,this.el=document.createElement("div"),this.el.className="traffic-div",this.el.id="traffic-div",this.currentIndexLight=0,this.dataBaseLocal=new g}return t.inputElement=function(){return(new t).getElement},Object.defineProperty(t.prototype,"getElement",{get:function(){return this.el},enumerable:!1,configurable:!0}),t.prototype.appLampa=function(){var t=new b(this.lamps.length,this);this.appLampaNew(t)},t.prototype.appLampaNew=function(t){this.lamps.push(t),this.reDraw()},t.prototype.delLampa=function(){this.lamps.splice(this.lamps.length-1,1),this.reDraw()},t.prototype.reDraw=function(){var t=this;this.el.innerHTML="",this.lamps.forEach((function(e){t.el.append(e.getElement)}))},t.prototype.getTimeEnd=function(){var e=t.timeStepMin,n=this.dataBaseLocal.getItemCurLampa();return n?(e=n.timeInterval,this.currentIndexLight=n.idLampa):this.currentIndexLight=0,e-t.timeTact},t.prototype.switchLight=function(){if(!t.isPause&&this.lamps.length>0){var e=this.getTimeEnd();console.log("switchLight"),console.log("timeend",e),e<=0&&(this.currentIndexLight++,this.currentIndexLight=this.currentIndexLight%this.lamps.length,this.lamps[this.currentIndexLight]&&(e=1e3*this.lamps[this.currentIndexLight].timeInterval)),this.dataBaseLocal.saveCurrentLamps({idLampa:this.currentIndexLight,backcolor:this.lamps[this.currentIndexLight].backcolor,timeInterval:e}),this.turnOnLight(this.currentIndexLight)}},t.prototype.turnOnLight=function(t){this.lamps.forEach((function(e,n){e.divLampa.style.opacity=n===t?"1":"0.1"}))},t.prototype.onPauseTimer=function(e){this.currentIndexLight===e.idLampa&&this.isTheadRun&&(t.isPause=!t.isPause)},t.timeTact=500,t.timeStepMin=1e3,t.isPause=!1,t}(),L=function(){function t(t){var e=this;this.lampaCurrent=t,this.el=document.createElement("div"),this.el.className="property-div",this.el.innerHTML="<h5>Св-во лампы</h5>";var n=document.createElement("label");n.textContent="Цвет",this.el.append(n);var r=document.createElement("input");r.type="color",r.value=this.lampaCurrent.backcolor,r.addEventListener("input",(function(){return e.lampaCurrent.updateFirst(event)})),this.el.append(r);var i=document.createElement("label");i.textContent="Время работы",this.el.append(i);var a=document.createElement("input");if(a.type="number",a.value=this.lampaCurrent.timeInterval.toString(),a.addEventListener("input",(function(){return e.lampaCurrent.updateTime(event)})),this.el.append(a),y.isPause){var o=document.createElement("label");o.textContent="Пауза",this.el.append(o)}}return t.inputElement=function(e){return new t(e).getElement},Object.defineProperty(t.prototype,"getElement",{get:function(){return this.el},enumerable:!1,configurable:!0}),t}(),b=function(){function t(t,e,n,r){this.traffic=e,this.idLampa=t,this.timeInterval=r||1,this.backcolor=n||this.getColorNoStart(t),this.creatDivBase(),this.creatDivLight(),this.divBase.appendChild(this.divLampa)}return Object.defineProperty(t.prototype,"getElement",{get:function(){return this.divBase},enumerable:!1,configurable:!0}),t.inputElement=function(e,n){return new t(e,n).getElement},t.prototype.creatDivBase=function(){this.divBase=document.createElement("div"),this.divBase.className="all_light",this.divBase.id="all_light"+this.idLampa.toString()},t.prototype.creatDivLight=function(){var t,e,n=this;this.divLampa=document.createElement("div"),this.divLampa.className="lampa-light",this.divLampa.id="lampa-light"+this.idLampa,this.divLampa.style.background=this.backcolor,null===(t=this.divLampa)||void 0===t||t.addEventListener("click",(function(){return n.showProperty()})),null===(e=this.divLampa)||void 0===e||e.addEventListener("mouseover",(function(){return n.onMouseover()}))},t.prototype.getColorNoStart=function(t){var e="green";switch(t%3){case 0:default:e="#00ff00";break;case 1:e="#ffff00";break;case 2:e="#ff0000"}return e},t.prototype.showProperty=function(){var t=document.getElementsByClassName("property-div");t&&Array.from(t).forEach((function(t){return t.remove()})),document.getElementById("body-div").append(L.inputElement(this))},t.prototype.updateFirst=function(t){var e=t.target.value;this.backcolor=e,this.divLampa.style.background=e},t.prototype.updateTime=function(t){try{var e=t.target.value;this.timeInterval=parseInt(e)}catch(t){}},t.prototype.onMouseover=function(){this.traffic.onPauseTimer(this),this.showProperty()},t}(),x=function(){function t(){this.timerId=null}return t.prototype.addLampaHandleClick=function(t){t.appLampa()},t.prototype.delLampaHandleClick=function(t){t.delLampa()},t.prototype.saveLampaHandleClick=function(t){var e=t.lamps.map((function(t){return{idLampa:t.idLampa,backcolor:t.backcolor,timeInterval:t.timeInterval}}));(new g).saveLampsTraffic(e)},t.prototype.loadLampaHandleClick=function(t){var e=(new g).loadLampsTraffic();t.lamps=[],Array.from(e).forEach((function(e){t.appLampaNew(new b(e.idLampa,t,e.backcolor,e.timeInterval))}))},t.prototype.startLampaHandleClick=function(t){t.lamps.length>0?(t.isTheadRun=!t.isTheadRun,console.log(t.isTheadRun?"Включен ".concat((new Date).toLocaleTimeString()):"\tВыключен ".concat((new Date).toLocaleTimeString())),t.isTheadRun?this.timerId=setInterval((function(){return t.switchLight()}),y.timeTact):clearInterval(this.timerId)):(t.isTheadRun=!1,console.log("В светофоре нет ламп !!!".toUpperCase()))},t}(),E=function(){function t(t){var e=this;this.actionBtn=[{title:"Добавить лампу",func:function(){return e.actions.addLampaHandleClick(e.trafficDiv)}},{title:"Удалить лампу",func:function(){return e.actions.delLampaHandleClick(e.trafficDiv)}},{title:"Сохранить",func:function(){return e.actions.saveLampaHandleClick(e.trafficDiv)}},{title:"Загрузить",func:function(){return e.actions.loadLampaHandleClick(e.trafficDiv)}},{title:"Старт/Стоп",func:function(){return e.actions.startLampaHandleClick(e.trafficDiv)}}],this.trafficDiv=t,this.el=document.createElement("div"),this.el.className="buttot-div",this.addButtons(this.actionBtn),this.actions=new x}return Object.defineProperty(t.prototype,"getElement",{get:function(){return this.el},enumerable:!1,configurable:!0}),t.prototype.addButtons=function(t){var e=this;t.forEach((function(t){return e.el.append(v.inputElement(t.title,t.func))}))},t}(),w=function(){function t(){this.el=document.createElement("div"),this.el.className="body-div",this.el.id="body-div",this.traffic=new y,this.buttons=new E(this.traffic),this.addDiv()}return t.inputElement=function(){return(new t).getElement},Object.defineProperty(t.prototype,"getElement",{get:function(){return this.el},enumerable:!1,configurable:!0}),t.prototype.addDiv=function(){this.el.append(this.buttons.getElement),this.el.append(this.traffic.getElement)},t}();new function(){var t=document.getElementById("root");t.append(f.inputElement()),t.append(w.inputElement())}})()})();